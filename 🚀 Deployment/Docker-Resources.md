<div align="center">

# ğŸ³ Docker Resources - Containerization for Developers

### _Package your app and ship it anywhere, hassle-free_ ğŸ“¦

![Docker](https://img.shields.io/badge/Docker-Containers-blue?style=for-the-badge&logo=docker)
![Orchestration](https://img.shields.io/badge/Orchestration-Kubernetes-purple?style=for-the-badge&logo=kubernetes)

</div>

---

<div align="center">

## ğŸ¯ Docker Fundamentals

</div>

### Core Concepts Explained ğŸ’¡

> ğŸ“¦ **Container**: A lightweight, standalone, executable package of software that includes everything needed to run an application: code, runtime, system tools, system libraries and settings.

> ğŸ³ **Image**: A read-only template with instructions for creating a Docker container. Images are built from a Dockerfile.

> ğŸš¢ **Dockerfile**: A text document that contains all the commands a user could call on the command line to assemble an image.

> ğŸ”— **Volume**: The preferred mechanism for persisting data generated by and used by Docker containers.

> ğŸŒ‰ **Network**: Connects containers to each other and to the outside world.

> ğŸŒ **Registry**: Stores Docker images (e.g., Docker Hub, GitHub Container Registry).

> orchestrator â†’ Tool for managing many containers (e.g., Kubernetes, Docker Swarm).

---

<div align="center">

## ğŸ› ï¸ Docker CLI Commands

</div>

### Essential Commands for Daily Use ğŸš€

```bash
# Docker Daemon
sudo systemctl start docker       # Start Docker (Linux)
open --hide --background -a Docker # Start Docker Desktop (macOS)
docker info                       # Display system-wide information
docker version                    # Display Docker version information

# Images
docker pull <image_name>          # Download an image from Docker Hub
docker images                     # List all images
docker rmi <image_id/name>        # Remove an image
docker build -t <tag_name> .      # Build an image from a Dockerfile
docker history <image_id/name>    # Show image history

# Containers
docker run <image_name>           # Run a container
docker run -d -p 80:80 <image>    # Run in detached mode, map port
docker ps                         # List running containers
docker ps -a                      # List all containers (running and stopped)
docker stop <container_id/name>   # Stop a running container
docker start <container_id/name>  # Start a stopped container
docker restart <container_id/name> # Restart a container
docker rm <container_id/name>     # Remove a container
docker exec -it <container_id/name> /bin/bash # Execute command in container
docker logs <container_id/name>   # Fetch the logs of a container
docker inspect <container_id/name> # Get detailed info about container
docker top <container_id/name>    # View running processes inside a container
docker cp <src_path> <container>:<dest_path> # Copy files to container
docker cp <container>:<src_path> <dest_path> # Copy files from container

# Volumes
docker volume create <name>       # Create a named volume
docker volume ls                  # List all volumes
docker volume inspect <name>      # Show info about a volume
docker volume rm <name>           # Remove a volume

# Networks
docker network create <name>      # Create a custom network
docker network ls                 # List all networks
docker network inspect <name>     # Show info about a network
docker network rm <name>          # Remove a network
docker network connect <network> <container> # Connect container to network

# Cleanup
docker system prune               # Remove all unused data
docker system prune -a            # Remove all unused (and dangling) data
```

---

<div align="center">

## ğŸš¢ Dockerfile Best Practices

</div>

### Creating Efficient & Secure Images ğŸ“

```dockerfile
# 1. Use a specific, small base image
FROM node:20-alpine AS builder

# 2. Set working directory
WORKDIR /app

# 3. Copy only necessary files first (for caching layers)
COPY package.json package-lock.json ./
# 4. Install dependencies
RUN npm ci --only=production

# 5. Copy application source code
COPY . .

# 6. Build application (if applicable)
RUN npm run build

# --- Stage 2: Production image ---
FROM node:20-alpine AS production

# 7. Set working directory
WORKDIR /app

# 8. Copy only what's needed from builder stage
COPY --from=builder /app/node_modules ./node_modules
COPY --from=builder /app/build ./build # or /app/dist

# 9. Copy package.json for start script
COPY package.json ./

# 10. Expose port (optional, good for documentation)
EXPOSE 3000

# 11. Run as non-root user (security)
USER node

# 12. Define command to run when container starts
CMD ["node", "build/index.js"] # or your entry point

# Healthcheck (optional but recommended)
HEALTHCHECK --interval=30s --timeout=3s --start-period=5s --retries=3 \
  CMD node healthcheck.js || exit 1

# Environment variables (better from outside, but can define defaults)
ENV NODE_ENV=production
```

---

<div align="center">

## ğŸŒ Docker Compose

</div>

### Orchestrating Multi-Container Applications ğŸ› ï¸

```yaml
# docker-compose.yml
version: "3.8" # Specify Compose file format version

services:
  web:
    build: . # Build from Dockerfile in current directory
    ports:
      - "3000:3000" # Map host port 3000 to container port 3000
    volumes:
      - .:/app # Mount current directory as volume (for dev)
      - /app/node_modules # Anonymous volume for node_modules (prevent host overwrite)
    environment:
      NODE_ENV: development
      DATABASE_URL: postgres://user:password@db:5432/mydb # Link to db service
    depends_on:
      - db # Ensure db service starts before web
    networks:
      - app-network

  db:
    image: postgres:14-alpine # Use official PostgreSQL image
    ports:
      - "5432:5432"
    environment:
      POSTGRES_DB: mydb
      POSTGRES_USER: user
      POSTGRES_PASSWORD: password
    volumes:
      - db-data:/var/lib/postgresql/data # Persist data in a named volume
    networks:
      - app-network

  redis:
    image: redis:6-alpine
    ports:
      - "6379:6379"
    command: redis-server --appendonly yes # Start Redis with persistence
    volumes:
      - redis-data:/data
    networks:
      - app-network

volumes: # Define named volumes for data persistence
  db-data:
  redis-data:

networks: # Define custom bridge network
  app-network:
    driver: bridge # Default driver, can be omitted
```

### Docker Compose Commands ğŸš€

```bash
docker compose up               # Build, create, start services
docker compose up -d            # Run in detached mode
docker compose build            # Build or rebuild services
docker compose down             # Stop and remove containers, networks, volumes
docker compose stop             # Stop services
docker compose start            # Start stopped services
docker compose restart          # Restart services
docker compose ps               # List services
docker compose logs             # View logs
docker compose exec <service> <command> # Execute command in service container
```

---

<div align="center">

## ğŸŒ Kubernetes (K8s)

</div>

### Container Orchestration Fundamentals â›µ

> ğŸš¢ **Pod**: Smallest deployable unit in Kubernetes, typically runs one or more containers.

> âš™ï¸ **Deployment**: Manages a set of identical Pods, handles rolling updates and rollbacks.

> ğŸ“¦ **Service**: Abstracts Pods, provides a stable network endpoint for accessing them.

> ğŸŒ **Ingress**: Manages external access to services in a cluster, typically HTTP/HTTPS.

> ğŸ”— **ConfigMap**: Stores non-confidential data in key-value pairs.

> ğŸ” **Secret**: Stores sensitive information (passwords, tokens).

> ğŸ’¾ **PersistentVolume (PV)**: Cluster-wide storage.

> ğŸ—„ï¸ **PersistentVolumeClaim (PVC)**: Request for storage by a Pod.

### Basic Kubernetes Manifests ğŸ“œ

```yaml
# deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: my-web-app
spec:
  replicas: 3 # Run 3 instances of the app
  selector:
    matchLabels:
      app: my-web-app
  template:
    metadata:
      labels:
        app: my-web-app
    spec:
      containers:
        - name: web-container
          image: my-repo/my-web-app:1.0.0
          ports:
            - containerPort: 80
          env:
            - name: NODE_ENV
              value: production
            - name: API_KEY
              valueFrom:
                secretKeyRef:
                  name: my-app-secrets
                  key: api_key
          resources: # Define resource limits/requests
            limits:
              memory: "128Mi"
              cpu: "500m"
            requests:
              memory: "64Mi"
              cpu: "250m"
```

```yaml
# service.yaml
apiVersion: v1
kind: Service
metadata:
  name: my-web-app-service
spec:
  selector:
    app: my-web-app # Selects pods with this label
  ports:
    - protocol: TCP
      port: 80 # Service exposed port
      targetPort: 80 # Pod's container port
  type: LoadBalancer # Expose service externally (other types: ClusterIP, NodePort)
```

---

<div align="center">

## ğŸ› ï¸ Docker & K8s Tools

</div>

### Ecosystem Enhancers ğŸš€

```
ğŸ³ **Docker Desktop** â†’ https://docker.com/products/docker-desktop

- GUI for managing Docker containers, images, volumes
- Includes Kubernetes (optional)
- Built-in `docker compose`

ğŸš€ **Kube-state-metrics** â†’ https://github.com/kubernetes/kube-state-metrics

- Exposes metrics about the state of objects in Kubernetes
- Used for monitoring with Prometheus/Grafana

â›µ **Lens** â†’ https://k8slens.dev

- The IDE for Kubernetes
- GUI for managing multiple clusters
- Real-time visibility into resources

ğŸ¯ **Minikube** â†’ https://minikube.sigs.k8s.io

- Runs a single-node Kubernetes cluster locally
- Great for local development and learning
- `minikube start`

ğŸ“œ **Kustomize** â†’ https://kustomize.io

- Native Kubernetes configuration management
- Declarative way to customize application configuration
- No templates, just YAML overlays

Helm â†’ https://helm.sh

- The package manager for Kubernetes
- Define, install, and upgrade complex Kubernetes applications
- "Charts" are reusable packages of K8s resources
```

---

<div align="center">

## ğŸ’¡ MrDib's Docker & K8s Workflow

</div>

### Containerization Strategy

1. **Start with Dockerfile**: Containerize your application first.

   - Use multi-stage builds for smaller images.
   - Run as non-root user.
   - Prioritize `npm ci` for speed.

2. **Local Development with Docker Compose**:

   - Use `docker compose` for multi-service local dev.
   - Mount volumes for live code changes.
   - Link services via network names.

3. **Registry for Image Storage**:

   - Push images to Docker Hub, GitHub Container Registry, or a private registry.
   - Tag images properly (e.g., `app:latest`, `app:v1.0.0`, `app:gitsha`).

4. **K8s for Production Orchestration**:

   - Deploy to a managed Kubernetes service (EKS, GKE, AKS).
   - Use Deployments for apps, Services for access.
   - Manage config with ConfigMaps and Secrets.
   - Ingress for external HTTP/HTTPS access.
   - Helm/Kustomize for complex deployments.

5. **CI/CD Integration**:
   - Build Docker images as part of CI (e.g., GitHub Actions).
   - Push images to registry.
   - Deploy to K8s using `kubectl` or Helm.

### Common Pitfalls to Avoid

- âŒ **Large Image Sizes**: Bloated images are slow.
- âŒ **Running as Root**: Security risk inside containers.
- âŒ **No Resource Limits**: Containers can consume too much.
- âŒ **Hardcoding Secrets**: Use K8s Secrets or environment variables.
- âŒ **Ignoring Logs**: Set up proper logging and monitoring.
- âŒ **Not Persisting Data**: Data loss on container restart.

---

<div align="center">

## ğŸ“š Docker & K8s Resources

</div>

### Learning & Documentation ğŸ“–

```
ğŸ³ Docker Docs â†’ https://docs.docker.com
   - Official Docker documentation
   - Get started guides, CLI reference
   - Dockerfile reference

â›µ Kubernetes Docs â†’ https://kubernetes.io/docs/
   - Official Kubernetes documentation
   - Concepts, tasks, tutorials
   - API reference

Play with Docker (PWD) â†’ https://labs.play-with-docker.com
   - Free online Docker playground
   - Practice Docker commands
   - No setup needed

Play with Kubernetes â†’ https://labs.play-with-k8s.com
   - Free online Kubernetes playground
   - Explore K8s concepts
   - Limited time cluster
```

---

<div align="center">

_Remember: Containers don't solve all your problems, but they certainly simplify shipping! ğŸ“¦_

</div>
